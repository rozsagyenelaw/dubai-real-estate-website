// Language translations for English and Arabic
const translations = {
    en: {
        // Navigation
        'nav.home': 'Home',
        'nav.properties': 'Properties',
        'nav.communities': 'Communities',
        'nav.services': 'Services',
        'nav.whyDubai': 'Why Dubai',
        'nav.about': 'About',
        'nav.contact': 'Contact',

        // Homepage
        'hero.title': 'Find Your Dream Property in Dubai',
        'hero.subtitle': 'Discover luxury living in the heart of the UAE',
        'search.buy': 'Buy',
        'search.rent': 'Rent',
        'search.propertyType': 'Property Type',
        'search.location': 'Location',
        'search.priceRange': 'Price Range',
        'search.bedrooms': 'Bedrooms',
        'search.searchBtn': 'Search Properties',
        'search.allTypes': 'All Types',
        'search.apartment': 'Apartment',
        'search.villa': 'Villa',
        'search.penthouse': 'Penthouse',
        'search.townhouse': 'Townhouse',
        'search.allLocations': 'All Locations',
        'search.downtown': 'Downtown Dubai',
        'search.marina': 'Dubai Marina',
        'search.palm': 'Palm Jumeirah',
        'search.jbr': 'JBR',
        'search.businessBay': 'Business Bay',
        'search.arabianRanches': 'Arabian Ranches',
        'search.dubaiHills': 'Dubai Hills Estate',
        'search.jlt': 'Jumeirah Lake Towers',
        'search.allPrices': 'All Prices',
        'search.studio': 'Studio',
        'search.5plus': '5+',

        // About section
        'about.title': 'Your Trusted Real Estate Partner',
        'about.text': 'With over 15 years of experience in Dubai\'s dynamic real estate market, we specialize in connecting clients with their perfect properties. Our team of expert consultants provides personalized service, market insights, and comprehensive support throughout your property journey.',
        'about.learnMore': 'Learn More About Us',

        // Featured Properties
        'featured.title': 'Featured Properties',
        'featured.subtitle': 'Handpicked premium properties across Dubai',
        'featured.viewDetails': 'View Details',
        'featured.beds': 'Beds',
        'featured.baths': 'Baths',

        // Why Choose Us
        'whyChoose.title': 'Why Choose Us',
        'whyChoose.expert.title': 'Expert Knowledge',
        'whyChoose.expert.text': '15+ years of Dubai real estate expertise',
        'whyChoose.portfolio.title': 'Extensive Portfolio',
        'whyChoose.portfolio.text': 'Access to thousands of premium properties',
        'whyChoose.service.title': 'Personalized Service',
        'whyChoose.service.text': 'Dedicated consultants for your needs',
        'whyChoose.support.title': 'End-to-End Support',
        'whyChoose.support.text': 'From viewing to closing and beyond',

        // Communities Preview
        'communities.title': 'Explore Dubai Communities',
        'communities.subtitle': 'Discover the best neighborhoods in Dubai',
        'communities.viewAll': 'View All Communities',
        'communities.features': 'Features',
        'communities.priceRange': 'Price Range',

        // Testimonials
        'testimonials.title': 'What Our Clients Say',

        // Newsletter
        'newsletter.title': 'Stay Updated',
        'newsletter.subtitle': 'Get the latest properties and market insights delivered to your inbox',
        'newsletter.placeholder': 'Enter your email',
        'newsletter.subscribe': 'Subscribe',

        // CTA
        'cta.title': 'Ready to Find Your Dream Property?',
        'cta.subtitle': 'Our expert consultants are here to help you every step of the way',
        'cta.button': 'Get Started Today',

        // Footer
        'footer.about': 'About Us',
        'footer.aboutText': 'Your trusted partner in Dubai real estate, providing expert guidance and exceptional service since 2008.',
        'footer.quickLinks': 'Quick Links',
        'footer.contact': 'Contact Info',
        'footer.phone': 'Phone',
        'footer.email': 'Email',
        'footer.address': 'Address',
        'footer.addressText': 'Dubai, United Arab Emirates',
        'footer.follow': 'Follow Us',
        'footer.rights': 'All rights reserved.',

        // Properties Page
        'properties.title': 'Browse Properties',
        'properties.results': 'properties found',
        'properties.filter': 'Filter Properties',
        'properties.sort': 'Sort By',
        'properties.sortNewest': 'Newest',
        'properties.sortPriceLow': 'Price: Low to High',
        'properties.sortPriceHigh': 'Price: High to Low',
        'properties.sortBedrooms': 'Most Bedrooms',
        'properties.reset': 'Reset Filters',
        'properties.applyFilters': 'Apply Filters',

        // Contact Page
        'contact.title': 'Get In Touch',
        'contact.subtitle': 'We\'re here to help you find your perfect property',
        'contact.name': 'Full Name',
        'contact.email': 'Email',
        'contact.phone': 'Phone',
        'contact.subject': 'Subject',
        'contact.message': 'Message',
        'contact.send': 'Send Message',
        'contact.success': 'Thank you! Your message has been sent successfully. We\'ll get back to you soon.',
        'contact.office': 'Our Office',
        'contact.hours': 'Business Hours',
        'contact.hoursText': 'Sunday - Thursday: 9:00 AM - 6:00 PM',
        'contact.social': 'Connect With Us',

        // Property Detail Page
        'property.videoTour': 'Property Video Tour',
        'property.about': 'About',
        'property.keyHighlights': 'Key Highlights',
        'property.availableUnits': 'Available Units',
        'property.amenities': 'World-Class Amenities',
        'property.exteriorViews': 'Exterior Views',
        'property.interiorSpaces': 'Interior Spaces',
        'property.premiumAmenities': 'Premium Amenities',
        'property.downloadMaterials': 'Download Materials',
        'property.startingPrice': 'Starting Price',
        'property.paymentPlan': 'Payment Plan',
        'property.requestInfo': 'Request Info',
        'property.callNow': 'Call Now',
        'property.consultantNote': 'Our real estate consultants are ready to help you find your perfect home.',

        // Property Features
        'feature.monthlyPayment': '1% Monthly Payment',
        'feature.monthlyPaymentDesc': 'Flexible and affordable payment plan',
        'feature.seaView': 'Sea View',
        'feature.seaViewDesc': 'Stunning oblique sea views',
        'feature.completion': 'Q1 2027 Completion',
        'feature.completionDesc': 'Ready for handover soon',
        'feature.primeLocation': 'Prime Location',
        'feature.primeLocationDesc': 'Dubai Maritime City waterfront',

        // Amenities
        'amenity.pool': 'Swimming Pool',
        'amenity.poolDesc': 'Resort-style infinity pool',
        'amenity.fitness': 'Fitness Center',
        'amenity.fitnessDesc': 'State-of-the-art gym equipment',
        'amenity.cinema': 'Private Cinema',
        'amenity.cinemaDesc': 'Exclusive movie screening room',
        'amenity.business': 'Business Center',
        'amenity.businessDesc': 'Fully equipped workspaces',
        'amenity.library': 'Library',
        'amenity.libraryDesc': 'Quiet reading and study areas',
        'amenity.concierge': '24/7 Concierge',
        'amenity.conciergeDesc': 'Premium concierge services',
        'amenity.security': 'Security',
        'amenity.securityDesc': '24-hour security and CCTV',
        'amenity.parking': 'Parking',
        'amenity.parkingDesc': 'Covered parking spaces',

        // Units Table
        'units.unitType': 'Unit Type',
        'units.size': 'Size (Sq.Ft)',
        'units.priceFrom': 'Price From',
        'units.status': 'Status',
        'units.studio': 'Studio',
        'units.bedroom': 'Bedroom',
        'units.presidentialSuite': 'Presidential Suite',
        'units.available': 'Available',
        'units.contactForPrice': 'Contact for Price',

        // Download Section
        'download.floorPlans': 'Floor Plans',
        'download.paymentPlans': 'Payment Plans',
    },
    ar: {
        // Navigation
        'nav.home': 'الرئيسية',
        'nav.properties': 'العقارات',
        'nav.communities': 'المجتمعات',
        'nav.services': 'الخدمات',
        'nav.whyDubai': 'لماذا دبي',
        'nav.about': 'من نحن',
        'nav.contact': 'اتصل بنا',

        // Homepage
        'hero.title': 'اعثر على عقار أحلامك في دبي',
        'hero.subtitle': 'اكتشف الحياة الفاخرة في قلب الإمارات',
        'search.buy': 'شراء',
        'search.rent': 'إيجار',
        'search.propertyType': 'نوع العقار',
        'search.location': 'الموقع',
        'search.priceRange': 'نطاق السعر',
        'search.bedrooms': 'غرف النوم',
        'search.searchBtn': 'ابحث عن العقارات',
        'search.allTypes': 'جميع الأنواع',
        'search.apartment': 'شقة',
        'search.villa': 'فيلا',
        'search.penthouse': 'بنتهاوس',
        'search.townhouse': 'تاون هاوس',
        'search.allLocations': 'جميع المواقع',
        'search.downtown': 'وسط مدينة دبي',
        'search.marina': 'دبي مارينا',
        'search.palm': 'نخلة جميرا',
        'search.jbr': 'جي بي آر',
        'search.businessBay': 'الخليج التجاري',
        'search.arabianRanches': 'المرابع العربية',
        'search.dubaiHills': 'دبي هيلز استيت',
        'search.jlt': 'أبراج بحيرات جميرا',
        'search.allPrices': 'جميع الأسعار',
        'search.studio': 'استوديو',
        'search.5plus': '٥+',

        // About section
        'about.title': 'شريكك الموثوق في العقارات',
        'about.text': 'مع أكثر من 15 عامًا من الخبرة في سوق العقارات الديناميكي في دبي، نحن متخصصون في ربط العملاء بممتلكاتهم المثالية. يقدم فريق الخبراء الاستشاريين لدينا خدمة شخصية ورؤى السوق والدعم الشامل طوال رحلة العقارات الخاصة بك.',
        'about.learnMore': 'تعرف علينا أكثر',

        // Featured Properties
        'featured.title': 'العقارات المميزة',
        'featured.subtitle': 'عقارات فاخرة مختارة بعناية في جميع أنحاء دبي',
        'featured.viewDetails': 'عرض التفاصيل',
        'featured.beds': 'غرف نوم',
        'featured.baths': 'حمامات',

        // Why Choose Us
        'whyChoose.title': 'لماذا تختارنا',
        'whyChoose.expert.title': 'خبرة متخصصة',
        'whyChoose.expert.text': 'أكثر من 15 عامًا من الخبرة العقارية في دبي',
        'whyChoose.portfolio.title': 'محفظة واسعة',
        'whyChoose.portfolio.text': 'الوصول إلى آلاف العقارات الفاخرة',
        'whyChoose.service.title': 'خدمة شخصية',
        'whyChoose.service.text': 'مستشارون مخصصون لتلبية احتياجاتك',
        'whyChoose.support.title': 'دعم شامل',
        'whyChoose.support.text': 'من المشاهدة إلى الإغلاق وما بعده',

        // Communities Preview
        'communities.title': 'استكشف مجتمعات دبي',
        'communities.subtitle': 'اكتشف أفضل الأحياء في دبي',
        'communities.viewAll': 'عرض جميع المجتمعات',
        'communities.features': 'المميزات',
        'communities.priceRange': 'نطاق السعر',

        // Testimonials
        'testimonials.title': 'ماذا يقول عملاؤنا',

        // Newsletter
        'newsletter.title': 'ابق على اطلاع',
        'newsletter.subtitle': 'احصل على أحدث العقارات ورؤى السوق في بريدك الإلكتروني',
        'newsletter.placeholder': 'أدخل بريدك الإلكتروني',
        'newsletter.subscribe': 'اشترك',

        // CTA
        'cta.title': 'هل أنت مستعد للعثور على عقار أحلامك؟',
        'cta.subtitle': 'مستشارونا الخبراء هنا لمساعدتك في كل خطوة على الطريق',
        'cta.button': 'ابدأ اليوم',

        // Footer
        'footer.about': 'من نحن',
        'footer.aboutText': 'شريكك الموثوق في العقارات في دبي، نقدم التوجيه المتخصص والخدمة الاستثنائية منذ عام 2008.',
        'footer.quickLinks': 'روابط سريعة',
        'footer.contact': 'معلومات الاتصال',
        'footer.phone': 'الهاتف',
        'footer.email': 'البريد الإلكتروني',
        'footer.address': 'العنوان',
        'footer.addressText': 'دبي، الإمارات العربية المتحدة',
        'footer.follow': 'تابعنا',
        'footer.rights': 'جميع الحقوق محفوظة.',

        // Properties Page
        'properties.title': 'تصفح العقارات',
        'properties.results': 'عقار موجود',
        'properties.filter': 'تصفية العقارات',
        'properties.sort': 'ترتيب حسب',
        'properties.sortNewest': 'الأحدث',
        'properties.sortPriceLow': 'السعر: من الأدنى إلى الأعلى',
        'properties.sortPriceHigh': 'السعر: من الأعلى إلى الأدنى',
        'properties.sortBedrooms': 'معظم غرف النوم',
        'properties.reset': 'إعادة تعيين الفلاتر',
        'properties.applyFilters': 'تطبيق الفلاتر',

        // Contact Page
        'contact.title': 'تواصل معنا',
        'contact.subtitle': 'نحن هنا لمساعدتك في العثور على عقارك المثالي',
        'contact.name': 'الاسم الكامل',
        'contact.email': 'البريد الإلكتروني',
        'contact.phone': 'الهاتف',
        'contact.subject': 'الموضوع',
        'contact.message': 'الرسالة',
        'contact.send': 'إرسال الرسالة',
        'contact.success': 'شكراً لك! تم إرسال رسالتك بنجاح. سنتواصل معك قريبًا.',
        'contact.office': 'مكتبنا',
        'contact.hours': 'ساعات العمل',
        'contact.hoursText': 'الأحد - الخميس: 9:00 صباحًا - 6:00 مساءً',
        'contact.social': 'تواصل معنا',

        // Property Detail Page
        'property.videoTour': 'جولة فيديو في العقار',
        'property.about': 'حول',
        'property.keyHighlights': 'أبرز المميزات',
        'property.availableUnits': 'الوحدات المتاحة',
        'property.amenities': 'وسائل الراحة العالمية',
        'property.exteriorViews': 'المناظر الخارجية',
        'property.interiorSpaces': 'المساحات الداخلية',
        'property.premiumAmenities': 'وسائل الراحة الفاخرة',
        'property.downloadMaterials': 'تحميل المواد',
        'property.startingPrice': 'السعر الابتدائي',
        'property.paymentPlan': 'خطة الدفع',
        'property.requestInfo': 'طلب معلومات',
        'property.callNow': 'اتصل الآن',
        'property.consultantNote': 'مستشارو العقارات لدينا مستعدون لمساعدتك في العثور على منزلك المثالي.',

        // Property Features
        'feature.monthlyPayment': 'دفع شهري 1%',
        'feature.monthlyPaymentDesc': 'خطة دفع مرنة وبأسعار معقولة',
        'feature.seaView': 'إطلالة بحرية',
        'feature.seaViewDesc': 'إطلالات بحرية جانبية خلابة',
        'feature.completion': 'الإنجاز في الربع الأول من 2027',
        'feature.completionDesc': 'جاهز للتسليم قريبًا',
        'feature.primeLocation': 'موقع متميز',
        'feature.primeLocationDesc': 'واجهة دبي للملاحة البحرية',

        // Amenities
        'amenity.pool': 'مسبح',
        'amenity.poolDesc': 'مسبح لا متناهٍ بأسلوب المنتجع',
        'amenity.fitness': 'مركز اللياقة البدنية',
        'amenity.fitnessDesc': 'معدات رياضية حديثة',
        'amenity.cinema': 'سينما خاصة',
        'amenity.cinemaDesc': 'غرفة عرض أفلام حصرية',
        'amenity.business': 'مركز الأعمال',
        'amenity.businessDesc': 'مساحات عمل مجهزة بالكامل',
        'amenity.library': 'مكتبة',
        'amenity.libraryDesc': 'مناطق هادئة للقراءة والدراسة',
        'amenity.concierge': 'خدمة الكونسيرج 24/7',
        'amenity.conciergeDesc': 'خدمات كونسيرج فاخرة',
        'amenity.security': 'الأمن',
        'amenity.securityDesc': 'أمن وكاميرات مراقبة على مدار الساعة',
        'amenity.parking': 'مواقف السيارات',
        'amenity.parkingDesc': 'مواقف سيارات مغطاة',

        // Units Table
        'units.unitType': 'نوع الوحدة',
        'units.size': 'الحجم (قدم مربع)',
        'units.priceFrom': 'السعر من',
        'units.status': 'الحالة',
        'units.studio': 'استوديو',
        'units.bedroom': 'غرفة نوم',
        'units.presidentialSuite': 'جناح رئاسي',
        'units.available': 'متاح',
        'units.contactForPrice': 'اتصل للسعر',

        // Download Section
        'download.floorPlans': 'مخططات الطوابق',
        'download.paymentPlans': 'خطط الدفع',
    }
};

// Language manager
const LanguageManager = {
    currentLang: 'en',

    init() {
        // Check for saved language preference
        const savedLang = localStorage.getItem('preferred-language');
        if (savedLang && translations[savedLang]) {
            this.currentLang = savedLang;
        }

        // Apply language on page load
        this.applyLanguage(this.currentLang);

        // Set up language toggle button
        const langToggle = document.getElementById('langToggle');
        if (langToggle) {
            langToggle.addEventListener('click', () => this.toggleLanguage());
            this.updateToggleButton();
        }
    },

    toggleLanguage() {
        this.currentLang = this.currentLang === 'en' ? 'ar' : 'en';
        localStorage.setItem('preferred-language', this.currentLang);
        this.applyLanguage(this.currentLang);
        this.updateToggleButton();
    },

    applyLanguage(lang) {
        // Set HTML dir and lang attributes
        document.documentElement.setAttribute('dir', lang === 'ar' ? 'rtl' : 'ltr');
        document.documentElement.setAttribute('lang', lang);

        // Translate all elements with data-i18n attribute
        const elements = document.querySelectorAll('[data-i18n]');
        elements.forEach(element => {
            const key = element.getAttribute('data-i18n');
            const translation = translations[lang][key];
            if (translation) {
                if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                    element.placeholder = translation;
                } else {
                    element.textContent = translation;
                }
            }
        });

        // Update results count if on properties page
        const resultsCount = document.getElementById('resultsCount');
        if (resultsCount) {
            const count = resultsCount.getAttribute('data-count');
            if (count) {
                resultsCount.textContent = `${count} ${translations[lang]['properties.results']}`;
            }
        }
    },

    updateToggleButton() {
        const langToggle = document.getElementById('langToggle');
        if (langToggle) {
            langToggle.textContent = this.currentLang === 'en' ? 'العربية' : 'English';
        }
    },

    translate(key) {
        return translations[this.currentLang][key] || key;
    }
};

// Initialize language manager when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => LanguageManager.init());
} else {
    LanguageManager.init();
}
